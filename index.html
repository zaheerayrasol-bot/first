<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub QR - Professional QR Code Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        :root {
            --github-dark: #0d1117;
            --github-dark-2: #161b22;
            --github-border: #30363d;
            --github-text: #c9d1d9;
            --github-blue: #58a6ff;
            --github-green: #3fb950;
            --github-purple: #8b5cf6;
        }
        
        body {
            background: var(--github-dark);
            color: var(--github-text);
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
        }
        
        .github-card {
            background: var(--github-dark-2);
            border: 1px solid var(--github-border);
            border-radius: 12px;
        }
        
        .github-input {
            background: var(--github-dark);
            border: 1px solid var(--github-border);
            color: var(--github-text);
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        
        .github-input:focus {
            border-color: var(--github-blue);
            outline: none;
            box-shadow: 0 0 0 3px rgba(88, 166, 255, 0.1);
        }
        
        .github-button {
            background: var(--github-green);
            color: white;
            border: none;
            border-radius: 8px;
            transition: all 0.2s ease;
        }
        
        .github-button:hover {
            background: #2ea043;
            transform: translateY(-1px);
        }
        
        .github-button-secondary {
            background: var(--github-dark-2);
            border: 1px solid var(--github-border);
            color: var(--github-text);
        }
        
        .github-button-secondary:hover {
            background: var(--github-dark);
            border-color: var(--github-blue);
        }
        
        .qr-canvas {
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }
        
        .logo-circle {
            background: white;
            border-radius: 50%;
            padding: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        .scan-effect {
            background: linear-gradient(transparent, rgba(88, 166, 255, 0.3), transparent);
            animation: scan 2s ease-in-out infinite;
        }
        
        @keyframes scan {
            0%, 100% { transform: translateY(-100%); opacity: 0; }
            50% { transform: translateY(100%); opacity: 1; }
        }
        
        .github-badge {
            background: var(--github-purple);
            color: white;
            border-radius: 20px;
            padding: 4px 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .loading-spinner {
            border: 3px solid rgba(255, 255, 255, 0.1);
            border-top: 3px solid var(--github-blue);
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .color-preview {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            border: 2px solid var(--github-border);
            cursor: pointer;
        }
        
        .slider-track {
            background: var(--github-border);
            height: 6px;
            border-radius: 3px;
        }
        
        .slider-thumb {
            background: var(--github-blue);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(88, 166, 255, 0.3);
        }
        
        .github-toggle {
            position: relative;
            display: inline-block;
            width: 48px;
            height: 24px;
        }
        
        .github-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--github-border);
            transition: .4s;
            border-radius: 24px;
        }
        
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .toggle-slider {
            background: var(--github-green);
        }
        
        input:checked + .toggle-slider:before {
            transform: translateX(24px);
        }
        
        .specs-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        
        .spec-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 12px;
            border-radius: 8px;
            border: 1px solid var(--github-border);
        }
    </style>
</head>
<body class="bg-github-dark">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <div class="flex items-center justify-center mb-4">
                <div class="w-12 h-12 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full flex items-center justify-center mr-3">
                    <i class="fab fa-github text-2xl text-white"></i>
                </div>
                <h1 class="text-3xl font-bold text-white">GitHub QR</h1>
            </div>
            <p class="text-gray-400">Generate professional QR codes with GitHub-inspired design</p>
        </div>

        <div class="grid lg:grid-cols-2 gap-6">
            <!-- Left Panel - Controls -->
            <div class="space-y-6">
                <!-- Content Section -->
                <div class="github-card p-6">
                    <h2 class="text-xl font-semibold mb-4 text-white">
                        <i class="fas fa-link mr-2 text-blue-400"></i>Content
                    </h2>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2 text-gray-300">URL or Text</label>
                            <textarea 
                                id="qr-content"
                                rows="3"
                                class="github-input w-full px-4 py-3"
                                placeholder="https://github.com/your-repo"
                            >https://github.com</textarea>
                        </div>
                    </div>
                </div>

                <!-- Logo Settings -->
                <div class="github-card p-6">
                    <h2 class="text-xl font-semibold mb-4 text-white">
                        <i class="fas fa-image mr-2 text-purple-400"></i>Logo Settings
                    </h2>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <label class="text-sm font-medium text-gray-300">Enable Circular Logo</label>
                            <label class="github-toggle">
                                <input type="checkbox" id="logo-enabled" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>

                        <div id="logo-upload-area" class="border-2 border-dashed border-github-border rounded-lg p-6 text-center cursor-pointer hover:border-blue-400 transition-colors">
                            <i class="fas fa-cloud-upload-alt text-2xl text-gray-400 mb-2"></i>
                            <p class="text-sm text-gray-400">Upload Logo Image</p>
                            <p class="text-xs text-gray-500">PNG, JPG, SVG (Max 2MB)</p>
                            <input type="file" id="logo-upload" accept="image/*" class="hidden" />
                        </div>
                        
                        <div id="logo-preview-container" class="text-center hidden">
                            <div class="logo-circle inline-block p-2 mb-3">
                                <img id="logo-preview" class="w-16 h-16 object-contain rounded-full" />
                            </div>
                            <button id="remove-logo" class="text-red-400 text-sm hover:text-red-300">
                                <i class="fas fa-trash mr-1"></i>Remove Logo
                            </button>
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-2 text-gray-300">Logo Size</label>
                            <div class="flex items-center space-x-4">
                                <input type="range" id="logo-size" min="15" max="35" value="25" class="flex-1 slider-track" />
                                <span id="logo-size-value" class="text-sm font-mono bg-github-dark px-3 py-1 rounded">25%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Design Settings -->
                <div class="github-card p-6">
                    <h2 class="text-xl font-semibold mb-4 text-white">
                        <i class="fas fa-palette mr-2 text-green-400"></i>Design
                    </h2>
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-2 text-gray-300">QR Color</label>
                                <input type="color" id="qr-color" value="#000000" class="color-preview" />
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-2 text-gray-300">Background</label>
                                <input type="color" id="bg-color" value="#ffffff" class="color-preview" />
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-2 text-gray-300">QR Size</label>
                            <div class="flex items-center space-x-4">
                                <input type="range" id="qr-size" min="200" max="800" value="400" class="flex-1 slider-track" />
                                <span id="size-value" class="text-sm font-mono bg-github-dark px-3 py-1 rounded">400px</span>
                            </div>
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-2 text-gray-300">Error Correction</label>
                            <select id="error-correction" class="github-input w-full px-4 py-2">
                                <option value="L">Low (L) - 7%</option>
                                <option value="M">Medium (M) - 15%</option>
                                <option value="Q" selected>High (Q) - 25%</option>
                                <option value="H">Highest (H) - 30%</option>
                            </select>
                        </div>

                        <button id="generate-btn" class="github-button w-full py-3 px-4 font-semibold">
                            <i class="fas fa-bolt mr-2"></i>Generate QR Code
                        </button>

                        <div id="generation-status" class="text-center hidden">
                            <div class="loading-spinner mx-auto mb-2"></div>
                            <p class="text-sm text-gray-400">Generating QR code...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel - Preview -->
            <div class="space-y-6">
                <!-- Preview Section -->
                <div class="github-card p-6">
                    <h2 class="text-xl font-semibold mb-4 text-white">
                        <i class="fas fa-eye mr-2 text-blue-400"></i>Preview
                    </h2>
                    
                    <div class="bg-white p-8 rounded-lg relative overflow-hidden">
                        <div class="qr-canvas mx-auto" style="max-width: 300px;">
                            <canvas id="qr-canvas" width="300" height="300" class="mx-auto"></canvas>
                            <div class="scan-effect absolute inset-x-0 top-0 h-2"></div>
                        </div>
                        
                        <div id="status-badge" class="github-badge absolute top-4 right-4">
                            Ready
                        </div>
                    </div>

                    <div class="mt-6 text-center">
                        <button id="download-btn" class="github-button-secondary py-2 px-6 font-semibold opacity-50 cursor-not-allowed" disabled>
                            <i class="fas fa-download mr-2"></i>Download QR Code
                        </button>
                    </div>
                </div>

                <!-- Specifications -->
                <div class="github-card p-6">
                    <h2 class="text-xl font-semibold mb-4 text-white">
                        <i class="fas fa-info-circle mr-2 text-green-400"></i>Specifications
                    </h2>
                    <div class="specs-grid">
                        <div class="spec-item">
                            <div class="text-sm text-gray-400">Size</div>
                            <div id="spec-size" class="font-semibold text-white">400×400px</div>
                        </div>
                        <div class="spec-item">
                            <div class="text-sm text-gray-400">Format</div>
                            <div class="font-semibold text-white">PNG</div>
                        </div>
                        <div class="spec-item">
                            <div class="text-sm text-gray-400">Error Correction</div>
                            <div id="spec-error" class="font-semibold text-green-400">High (Q)</div>
                        </div>
                        <div class="spec-item">
                            <div class="text-sm text-gray-400">Logo</div>
                            <div id="spec-logo" class="font-semibold text-purple-400">Enabled</div>
                        </div>
                    </div>
                </div>

                <!-- Export Options -->
                <div class="github-card p-6">
                    <h2 class="text-xl font-semibold mb-4 text-white">
                        <i class="fas fa-download mr-2 text-blue-400"></i>Export
                    </h2>
                    <div class="grid grid-cols-2 gap-3">
                        <button class="download-option github-button-secondary py-2 px-3" data-format="png">
                            <i class="fas fa-file-image mr-2"></i>PNG
                        </button>
                        <button class="download-option github-button-secondary py-2 px-3" data-format="svg">
                            <i class="fas fa-file-code mr-2"></i>SVG
                        </button>
                        <button class="download-option github-button-secondary py-2 px-3" data-format="jpeg">
                            <i class="fas fa-file-image mr-2"></i>JPEG
                        </button>
                        <button class="download-option github-button-secondary py-2 px-3" data-format="webp">
                            <i class="fas fa-file-image mr-2"></i>WEBP
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('GitHub QR Generator Initialized');
            
            // Elements
            const qrContent = document.getElementById('qr-content');
            const qrColor = document.getElementById('qr-color');
            const bgColor = document.getElementById('bg-color');
            const qrSize = document.getElementById('qr-size');
            const sizeValue = document.getElementById('size-value');
            const errorCorrection = document.getElementById('error-correction');
            const generateBtn = document.getElementById('generate-btn');
            const generationStatus = document.getElementById('generation-status');
            const statusBadge = document.getElementById('status-badge');
            const downloadBtn = document.getElementById('download-btn');
            const downloadOptions = document.querySelectorAll('.download-option');
            const qrCanvas = document.getElementById('qr-canvas');
            const specSize = document.getElementById('spec-size');
            const specError = document.getElementById('spec-error');
            const specLogo = document.getElementById('spec-logo');
            
            // Logo elements
            const logoEnabled = document.getElementById('logo-enabled');
            const logoUpload = document.getElementById('logo-upload');
            const logoUploadArea = document.getElementById('logo-upload-area');
            const logoPreviewContainer = document.getElementById('logo-preview-container');
            const logoPreview = document.getElementById('logo-preview');
            const removeLogo = document.getElementById('remove-logo');
            const logoSize = document.getElementById('logo-size');
            const logoSizeValue = document.getElementById('logo-size-value');

            let currentQRCode = null;
            let logoImage = null;

            // Initialize
            initApp();

            function initApp() {
                // Set initial values
                sizeValue.textContent = qrSize.value + 'px';
                logoSizeValue.textContent = logoSize.value + '%';
                specSize.textContent = qrSize.value + '×' + qrSize.value + 'px';
                
                // Setup event listeners
                setupEventListeners();
                
                // Generate initial QR code
                generateQRCode();
            }

            function setupEventListeners() {
                // Input changes
                qrSize.addEventListener('input', function() {
                    sizeValue.textContent = this.value + 'px';
                    specSize.textContent = this.value + '×' + this.value + 'px';
                });

                logoSize.addEventListener('input', function() {
                    logoSizeValue.textContent = this.value + '%';
                });

                // Logo functionality
                logoUploadArea.addEventListener('click', () => logoUpload.click());
                logoUpload.addEventListener('change', handleLogoUpload);
                
                removeLogo.addEventListener('click', function() {
                    logoImage = null;
                    logoPreviewContainer.classList.add('hidden');
                    specLogo.textContent = 'Disabled';
                    generateQRCode();
                });

                logoEnabled.addEventListener('change', function() {
                    specLogo.textContent = this.checked ? 'Enabled' : 'Disabled';
                    generateQRCode();
                });

                // Generate button
                generateBtn.addEventListener('click', generateQRCode);

                // Download functionality
                downloadBtn.addEventListener('click', () => downloadQRCode('png'));

                downloadOptions.forEach(option => {
                    option.addEventListener('click', function() {
                        const format = this.getAttribute('data-format');
                        downloadQRCode(format);
                    });
                });

                // Real-time generation
                [qrColor, bgColor, errorCorrection, logoSize].forEach(input => {
                    input.addEventListener('input', generateQRCode);
                });
            }

            function handleLogoUpload(event) {
                const file = event.target.files[0];
                if (!file) return;

                if (file.size > 2 * 1024 * 1024) {
                    alert('Logo size must be less than 2MB');
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(e) {
                    logoImage = new Image();
                    logoImage.onload = function() {
                        logoPreview.src = e.target.result;
                        logoPreviewContainer.classList.remove('hidden');
                        specLogo.textContent = 'Enabled';
                        generateQRCode();
                    };
                    logoImage.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }

            function generateQRCode() {
                const content = qrContent.value.trim();
                if (!content) {
                    alert('Please enter some text or URL');
                    return;
                }

                const size = 300;
                const qrColorValue = qrColor.value;
                const bgColorValue = bgColor.value;
                const errorLevel = errorCorrection.value;
                const hasLogo = logoEnabled.checked && logoImage;

                // Show loading
                generationStatus.classList.remove('hidden');
                statusBadge.textContent = 'Generating...';
                statusBadge.style.background = '#58a6ff';
                generateBtn.disabled = true;

                // Clear canvas
                const ctx = qrCanvas.getContext('2d');
                ctx.fillStyle = bgColorValue;
                ctx.fillRect(0, 0, size, size);

                try {
                    QRCode.toCanvas(qrCanvas, content, {
                        width: size,
                        margin: 2,
                        color: {
                            dark: qrColorValue,
                            light: bgColorValue
                        },
                        errorCorrectionLevel: errorLevel
                    }, function(error) {
                        if (error) {
                            handleGenerationError(error);
                            return;
                        }

                        if (hasLogo) {
                            addCircularLogo(size);
                        }

                        finishGeneration();
                    });
                } catch (error) {
                    handleGenerationError(error);
                }
            }

            function addCircularLogo(size) {
                const ctx = qrCanvas.getContext('2d');
                const logoSizePercent = parseInt(logoSize.value);
                const logoRadius = (size * logoSizePercent) / 200; // radius instead of width/height
                const centerX = size / 2;
                const centerY = size / 2;

                // Draw white circular background
                ctx.fillStyle = '#ffffff';
                ctx.beginPath();
                ctx.arc(centerX, centerY, logoRadius + 8, 0, 2 * Math.PI);
                ctx.fill();

                // Draw circular logo (clipped to circle)
                ctx.save();
                ctx.beginPath();
                ctx.arc(centerX, centerY, logoRadius, 0, 2 * Math.PI);
                ctx.clip();
                
                const logoWidth = logoRadius * 2;
                const logoHeight = logoRadius * 2;
                const logoX = centerX - logoRadius;
                const logoY = centerY - logoRadius;
                
                ctx.drawImage(logoImage, logoX, logoY, logoWidth, logoHeight);
                ctx.restore();
            }

            function finishGeneration() {
                generationStatus.classList.add('hidden');
                statusBadge.textContent = 'Ready';
                statusBadge.style.background = '#3fb950';
                generateBtn.disabled = false;
                downloadBtn.disabled = false;
                downloadBtn.classList.remove('opacity-50', 'cursor-not-allowed');

                // Update error correction spec
                const errorText = {
                    'L': 'Low (L)',
                    'M': 'Medium (M)',
                    'Q': 'High (Q)',
                    'H': 'Highest (H)'
                }[errorCorrection.value];
                specError.textContent = errorText;

                currentQRCode = {
                    content: qrContent.value.trim(),
                    size: parseInt(qrSize.value),
                    qrColor: qrColor.value,
                    bgColor: bgColor.value,
                    errorLevel: errorCorrection.value
                };
            }

            function handleGenerationError(error) {
                console.error('QR generation error:', error);
                generationStatus.classList.add('hidden');
                statusBadge.textContent = 'Error';
                statusBadge.style.background = '#ff6b6b';
                generateBtn.disabled = false;
                alert('Error generating QR code. Please try again.');
            }

            function downloadQRCode(format) {
                if (!currentQRCode) return;

                const tempCanvas = document.createElement('canvas');
                const tempCtx = tempCanvas.getContext('2d');
                const downloadSize = currentQRCode.size;
                
                tempCanvas.width = downloadSize;
                tempCanvas.height = downloadSize;

                QRCode.toCanvas(tempCanvas, currentQRCode.content, {
                    width: downloadSize,
                    margin: 2,
                    color: {
                        dark: currentQRCode.qrColor,
                        light: currentQRCode.bgColor
                    },
                    errorCorrectionLevel: currentQRCode.errorLevel
                }, function(error) {
                    if (error) {
                        alert('Error creating download file');
                        return;
                    }

                    if (logoEnabled.checked && logoImage) {
                        const logoSizePercent = parseInt(logoSize.value);
                        const logoRadius = (downloadSize * logoSizePercent) / 200;
                        const centerX = downloadSize / 2;
                        const centerY = downloadSize / 2;

                        // Draw white circular background
                        tempCtx.fillStyle = '#ffffff';
                        tempCtx.beginPath();
                        tempCtx.arc(centerX, centerY, logoRadius + 8, 0, 2 * Math.PI);
                        tempCtx.fill();

                        // Draw circular logo
                        tempCtx.save();
                        tempCtx.beginPath();
                        tempCtx.arc(centerX, centerY, logoRadius, 0, 2 * Math.PI);
                        tempCtx.clip();
                        
                        const logoWidth = logoRadius * 2;
                        const logoHeight = logoRadius * 2;
                        const logoX = centerX - logoRadius;
                        const logoY = centerY - logoRadius;
                        
                        tempCtx.drawImage(logoImage, logoX, logoY, logoWidth, logoHeight);
                        tempCtx.restore();
                    }

                    const link = document.createElement('a');
                    link.download = `github-qr-${Date.now()}.${format}`;
                    link.href = tempCanvas.toDataURL(`image/${format}`);
                    link.click();
                });
            }
        });
    </script>
</body>
</html>
